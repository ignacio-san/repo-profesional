<section class="section section-project-detail">
  <div class="container project-detail">
    <header class="project-detail-header">
      <a routerLink="/proyectos" class="back-link">Volver a proyectos</a>
      <h1 class="project-detail-title">Sistema de Control de Accesos NFC</h1>

      <div class="project-meta-strip">
        <span class="project-meta-tag">Club LeÃ³n Â· OperaciÃ³n en estadio</span>
        <span class="project-meta-tag">Autor: Ignacio SÃ¡nchez</span>
        <span class="project-meta-tag">VersiÃ³n: v1.0.0</span>
      </div>

      <p class="project-detail-subtitle">
        Plataforma interna para validar accesos mediante tarjetas NFC y registrar eventos en tiempo
        real. DiseÃ±ada para operaciÃ³n rÃ¡pida en dÃ­as de partido, con trazabilidad, reglas de
        permisos por zona y monitoreo para auditorÃ­a.
      </p>
    </header>

    <div class="project-detail-grid">
      <div class="project-detail-main">
        <section class="project-block">
          <div class="project-block-inner">
            <h2>Resumen</h2>
            <p>
              El sistema de accesos NFC fue construido para acelerar la validaciÃ³n de credenciales
              en puntos de entrada y zonas restringidas. Al escanear una tarjeta, el operador puede
              ver informaciÃ³n del titular, vigencia, tipo de acceso y estatus, ademÃ¡s de registrar
              el evento para historial y auditorÃ­a.
            </p>
            <p>
              La operaciÃ³n se optimiza con validaciÃ³n en tiempo real y reglas por roles o zonas,
              evitando revisiones manuales y reduciendo errores durante picos de concurrencia.
            </p>
          </div>
        </section>

        <section class="project-block">
          <div class="project-block-inner">
            <h2>Impacto del proyecto</h2>
            <ul>
              <li>âš¡ï¸ValidaciÃ³n mÃ¡s rÃ¡pida en accesos con menor fricciÃ³n operativa.</li>
              <li>âš¡ï¸Registro auditable por fecha, punto de acceso, operador y tipo de evento.</li>
              <li>âš¡ï¸Reglas de permisos por zona/rol para mejorar control y seguridad.</li>
              <li>âš¡ï¸Menos errores vs. procesos manuales y listas impresas.</li>
              <li>âš¡ï¸Visibilidad del flujo de accesos para operaciÃ³n y supervisiÃ³n.</li>
            </ul>
          </div>
        </section>

        <section class="project-block">
          <div class="project-block-inner">
            <h2>Objetivos del proyecto</h2>
            <ul>
              <li>ğŸ¯Implementar validaciÃ³n segura y eficiente de accesos con NFC.</li>
              <li>ğŸ¯Reducir procesos manuales y evitar duplicidades/errores de control.</li>
              <li>ğŸ¯Tener historial consultable y filtros por fecha, zona, evento y operador.</li>
              <li>ğŸ¯Integrar reglas de permisos y restricciones configurables.</li>
              <li>ğŸ¯OperaciÃ³n fluida bajo alta concurrencia (dÃ­as de partido).</li>
            </ul>
          </div>
        </section>
      </div>

      <aside class="project-detail-aside">
        <div class="project-detail-card">
          <h3>Ficha del proyecto</h3>
          <dl>
            <div class="dl-row">
              <dt>Tipo de soluciÃ³n</dt>
              <dd>Herramienta interna Â· Control de accesos NFC</dd>
            </div>
            <div class="dl-row">
              <dt>Rol</dt>
              <dd>Desarrollador de software Â· Full-stack</dd>
            </div>
            <div class="dl-row">
              <dt>Contexto</dt>
              <dd>ValidaciÃ³n de credenciales y auditorÃ­a de accesos en estadio</dd>
            </div>
            <div class="dl-row">
              <dt>TecnologÃ­as</dt>
              <dd>Node.js Â· nfc-pcsc Â· WebSocket (ws) Â· Angular Â· Firebase/Servicios internos</dd>
            </div>
          </dl>

          <div class="project-card-tags">
            <span class="project-card-tag">NFC</span>
            <span class="project-card-tag">Tiempo real</span>
            <span class="project-card-tag">AuditorÃ­a</span>
            <span class="project-card-tag">OperaciÃ³n</span>
          </div>
        </div>
      </aside>
    </div>

    <section class="project-two-column-row">
      <section class="project-block project-block-card project-block-card-accent">
        <div class="project-block-inner">
          <h2>ParticipaciÃ³n en el proyecto</h2>
          <ul>
            <li>ğŸ“ImplementaciÃ³n de lectura NFC y manejo de eventos de escaneo.</li>
            <li>ğŸ“ValidaciÃ³n contra reglas internas (vigencias, zonas, permisos y estatus).</li>
            <li>ğŸ“Interfaz para operaciÃ³n: validaciÃ³n, resultado visual y mensajes de error.</li>
            <li>ğŸ“Registro histÃ³rico con filtros por fecha, punto de acceso y operador.</li>
            <li>ğŸ“IntegraciÃ³n tiempo real con WebSocket para respuesta inmediata.</li>
            <li>ğŸ“Pruebas en campo y ajustes para picos de concurrencia.</li>
          </ul>
        </div>
      </section>

      <section class="project-block project-block-card">
        <div class="project-block-inner">
          <h2>MÃ³dulos principales</h2>
          <ul>
            <li><strong>ğŸ”¸Escaneo y validaciÃ³n:</strong> lectura NFC, bÃºsqueda y veredicto inmediato.</li>
            <li><strong>ğŸ”¸Reglas de acceso:</strong> permisos por zona/rol, vigencias y restricciones.</li>
            <li><strong>ğŸ”¸Historial:</strong> bitÃ¡cora de accesos con filtros y consulta rÃ¡pida.</li>
            <li><strong>ğŸ”¸AuditorÃ­a:</strong> detalle por evento: quiÃ©n, dÃ³nde, cuÃ¡ndo y resultado.</li>
            <li><strong>ğŸ”¸Monitoreo:</strong> visibilidad de flujo y estados para supervisiÃ³n.</li>
          </ul>
        </div>
      </section>
    </section>

    <!-- GALERÃA (TELÃ‰FONO) -->
    <section class="project-gallery project-gallery-mobile">
      <h2>GalerÃ­a</h2>
      <p class="gallery-hint">
        Capturas sugeridas: pantalla de escaneo, resultado de validaciÃ³n, reglas de acceso y
        bitÃ¡cora/historial de eventos.
      </p>

      <div class="gallery-layout-mobile">
        <!-- â€œCELULARâ€ PRINCIPAL -->
        <div class="phone-frame" aria-hidden="true">
          <ng-container *ngIf="isVideo(activeImage.src); else phoneImage">
            <video
              class="phone-video"
              autoplay
              loop
              muted
              playsinline
              preload="auto"
            >
              <source [src]="activeImage.src" type="video/mp4" />
            </video>
          </ng-container>

          <ng-template #phoneImage>
            <img [src]="activeImage.src" [alt]="activeImage.alt" class="phone-img" />
          </ng-template>
        </div>

        <!-- MINIATURAS -->
        <div class="phone-thumbs">
          <ng-container *ngFor="let img of galleryImages; let i = index">
            <button
              *ngIf="i !== activeIndex"
              type="button"
              class="phone-thumb"
              (click)="setActive(i)"
              [attr.aria-label]="'Abrir: ' + img.alt"
            >
              <ng-container *ngIf="isVideo(img.src); else thumbImage">
                <div class="phone-thumb-video">
                  <span class="phone-thumb-badge">VIDEO</span>
                </div>
              </ng-container>

              <ng-template #thumbImage>
                <img [src]="img.src" [alt]="img.alt" />
              </ng-template>
            </button>
          </ng-container>
        </div>
      </div>
    </section>
  </div>
</section>
